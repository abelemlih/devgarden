.more= link_to "View Project", project
= render "shared/autosave_status"

- heading "#{project.name.presence || 'Project'} Info" do

  #project-edit-tabs.tabs
    %ul
      %li= link_to "Basics",       "#info"
      %li= link_to "Icon",         "#graphics"
      %li= link_to "Description",  "#description"
      %li= link_to "Technologies", "#tags"
      %li= link_to "People",       "#participants"
      %li= link_to "Help wanted",  "#role-reqs"

    .tab#info-tab
      = render "basics_form"

    .tab#description-tab
      = project_form "description" do |f|
        = f.inputs do
          = f.input :description
        .actions
          = f.save_button

    .tab#graphics-tab
      = form_for project, html: { id: "project-icon-dropzone" } do
        .dz-message
          Drop or click to change image
          .detail
            Required: <b>PNG or JPEG</b>, max <b>5 MB</b> <br>
            Recommended: <b>square</b>, at least <b>512Ã—512</b>
        - if project.icon?
          .dz-preview.dz-image-preview.existing-icon
            .dz-image
              = image_tag project.icon.feature.url, alt: 'Project logo'

    .tab#tags-tab
      = project_form "tags", autosave: true do |f|
        = f.inputs do
          - TagCategory.in_order.each do |category|
            = f.input :tags, label: category.name.pluralize, required: true, as: :check_boxes, collection: category.tags.order('name')

    .tab#participants-tab
      = project_form "participants", autosave: true do |f|
        = f.inputs do
          = f.input :participants

    .tab#role-reqs-tab
      = project_form "role-reqs", autosave: true do |f|
        = f.inputs do
          - RoleCategory.all.shuffle.each do |category|
            = f.input :requested_role_ids, label: category.name, required: true, as: :check_boxes, collection: labeled_roles_for_category(category)
